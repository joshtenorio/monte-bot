#include "MarinePush.h"

void MarinePush::initialize(){

    // note: setting config like this doesn't work
    //       setting config requires it in a pushBuildOrderStep, and it has to be after the producer gets built
    //       and generally inconsistent - need to fix this
    config.starportTechOutput = sc2::ABILITY_ID::TRAIN_RAVEN;
    config.factoryOutput = sc2::ABILITY_ID::TRAIN_HELLION;

    config.maxWorkers = 40;

    pushBuildOrderStep(TYPE_BUILD, sc2::ABILITY_ID::BUILD_BARRACKS, STEP_NONBLOCKING, STEP_HIGHEST_PRIO, 16);
    pushBuildOrderStep(TYPE_BUILD, sc2::ABILITY_ID::BUILD_REFINERY, STEP_NONBLOCKING, STEP_HIGHEST_PRIO, 16);
    pushBuildOrderStep(TYPE_TRAIN, sc2::ABILITY_ID::TRAIN_REAPER, STEP_NONBLOCKING, STEP_HIGHEST_PRIO);
    pushBuildOrderStep(TYPE_BUILD, sc2::ABILITY_ID::BUILD_COMMANDCENTER, STEP_NONBLOCKING, STEP_HIGHEST_PRIO - 1);
    pushBuildOrderStep(TYPE_TRAIN, sc2::ABILITY_ID::TRAIN_MARINE, STEP_BLOCKING, STEP_HIGHEST_PRIO - 1);

    pushBuildOrderStep(TYPE_BUILD, sc2::ABILITY_ID::BUILD_FACTORY, STEP_NONBLOCKING, STEP_HIGHEST_PRIO);
    //pushBuildOrderStep(TYPE_SET_PRODUCTION, sc2::ABILITY_ID::TRAIN_HELLION, STEP_NONBLOCKING, STEP_HIGHEST_PRIO - 1);
    pushBuildOrderStep(TYPE_BUILD, sc2::ABILITY_ID::BUILD_BUNKER, STEP_NONBLOCKING, STEP_HIGHEST_PRIO);
    pushBuildOrderStep(TYPE_BUILDINGCAST, sc2::ABILITY_ID::BUILD_TECHLAB_BARRACKS, STEP_NONBLOCKING, STEP_HIGHEST_PRIO);
    pushBuildOrderStep(TYPE_BUILDINGCAST, sc2::ABILITY_ID::RESEARCH_STIMPACK, STEP_NONBLOCKING, STEP_HIGHEST_PRIO);
    pushBuildOrderStep(TYPE_SET_PRODUCTION, sc2::ABILITY_ID::TRAIN_MARAUDER, STEP_NONBLOCKING, STEP_HIGHEST_PRIO);
    pushBuildOrderStep(TYPE_SET_PRODUCTION, sc2::ABILITY_ID::TRAIN_MARINE, STEP_NONBLOCKING, STEP_HIGHEST_PRIO);
    //pushBuildOrderStep(TYPE_BUILDINGCAST, sc2::ABILITY_ID::BUILD_TECHLAB_FACTORY, STEP_NONBLOCKING, STEP_HIGHEST_PRIO - 1);

    pushBuildOrderStep(TYPE_BUILD, sc2::ABILITY_ID::BUILD_REFINERY, STEP_NONBLOCKING, STEP_HIGHEST_PRIO);
    pushBuildOrderStep(TYPE_BUILD, sc2::ABILITY_ID::BUILD_STARPORT, STEP_NONBLOCKING, STEP_HIGHEST_PRIO - 1);
    pushBuildOrderStep(TYPE_TRAIN, sc2::ABILITY_ID::TRAIN_LIBERATOR, STEP_BLOCKING, STEP_HIGHEST_PRIO - 1);

    
    pushBuildOrderStep(TYPE_SET_PRODUCTION, sc2::ABILITY_ID::TRAIN_VIKINGFIGHTER, STEP_NONBLOCKING, STEP_HIGHEST_PRIO);

}